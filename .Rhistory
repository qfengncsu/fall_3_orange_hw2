)
ggsurvplot(katrina_reason, conf.int = TRUE,
palette=c("#F4CC70", "#DE7A22","#20948B","#A43820"),
xlab = "Time (in hours)",
font.x=14,
font.y=14,
legend.title = "Reason for Pump Failure",
legend.labs = c('flood','motor','surge','jammed'),
font.legend = list(size=12),
ggtheme = theme_bw()
)
ggsurvplot(katrina_reason, conf.int = TRUE,
palette=c("#F4CC70", "#DE7A22","#20948B","#A43820"),
xlab = "Time (in hours)",
font.x=14,
font.y=14,
legend.title = "Reason for Pump Failure",
legend.labs = c('flood','motor','surge','jammed'),
font.legend = list(size=14),
ggtheme = theme_bw()
)
ggsurvplot(katrina_reason, conf.int = TRUE,
palette=c("#F4CC70", "#DE7A22","#20948B","#A43820"),
xlab = "Time (in hours)",
font.x=16,
font.y=16,
legend.title = "Reason for Pump Failure",
legend.labs = c('flood','motor','surge','jammed'),
font.legend = list(size=16),
ggtheme = theme_bw()
)
katrina_reason
# need these packages
library(data.table)
library(survival)
library(survminer)
library(muhaz)
katrina <- fread('Survival Analysis/Data/katrina.csv')
# create a survival curve with no stratification
# survive==0 since we're interested in pump failure (non-survival)
katrina_fit <- survfit(Surv(katrina$hour, katrina$survive==0) ~ 1, data=katrina)
# calling this gives the sample size, #events (survive==0, failure), median, and CI
katrina_fit #### do we need to stratify median by reason?
# the summary gives us the time, number at risk, number of events,
summary(katrina_fit)
# stratify by reason and plot
katrina_reason <- survfit(Surv(katrina$hour, katrina$survive==0) ~ katrina$reason, data = katrina, subset = katrina$reason !=0)
katrina_reason
# log-rank test
survdiff(Surv(katrina$hour, katrina$survive==0) ~ katrina$reason, rho = 0, data = katrina, subset = katrina$reason != 0)
# pairwise comparison
pairwise_survdiff(Surv(time = hour, event = survive == 0) ~ reason, rho = 0, data = katrina[katrina$reason != 0,])
# here, i am making a new variable hour2, where i'm setting censored observations
# to have hour2 = 49 so that the function doesn't plot them as if they all had
# the event in the last week
katrina$hour2 <- ifelse(katrina$hour == 48 & katrina$survive == 1, 49, katrina$hour)
# create a new variable survive2 that is the opposite of survive
### we did this because kphaz.fit() automatically assumes 0 is censored
### and 1 is the event, and it doesn't look like this can be changed.
katrina$survive2 <- ifelse(katrina$survive==0, 1, 0)
# kphaz.fit() has the same arguments as Surv()
katrina_haz <- with(katrina, kphaz.fit(hour2, survive2))
# and we plot it with kphaz.plot()
kphaz.plot(katrina_haz, main = "hazard function")
katrina_haz
# extract values from katrina_haz and create better visualizaiton.
k_time <- katrina_haz$time
k_haz <- katrina_haz$haz
hazard_df <- as.data.frame(c(k_time, k_haz))
View(hazard_df)
View(hazard_df)
hazard_df <- as.data.frame((k_time, k_haz))
hazard_df <- as.data.frame(cbind(k_time, k_haz))
View(hazard_df)
View(hazard_df)
library(dplyr)
library(ggplots2)
library(ggplot2)
ggplot(data=hazard_df)
ggplot(data=hazard_df, y=hazard_df$k_time, x=hazard_df$k_haz)
# and we plot it with kphaz.plot()
kphaz.plot(katrina_haz, main = "Hazard Function", xlab='Time (in hour)')
# and we plot it with kphaz.plot()
kphaz.plot(katrina_haz, main = "Hazard Function", x='Time (in hour)')
# and we plot it with kphaz.plot()
kphaz.plot(katrina_haz, main = "Hazard Function",
xlab="Time (in hour)"
)
# and we plot it with kphaz.plot()
kphaz.plot(katrina_haz, main = "Hazard Function",
xlab="Time (in hour)",
ylab="test"
)
# and we plot it with kphaz.plot()
kphaz.plot(katrina_haz, main = "Hazard Function", color='blue')
# and we plot it with kphaz.plot()
kphaz.plot(katrina_haz, main = "Hazard Function", plot.color='blue')
warnings()
katrina_reason
# stratify by reason and plot
katrina_reason <- survfit(Surv(katrina$hour, katrina$survive==0) ~ katrina$reason, data = katrina, subset = katrina$reason !=0)
katrina_reason
# the summary gives us the time, number at risk, number of events,
summary(katrina_fit)
# need these packages
library(data.table)
library(survival)
library(survminer)
library(muhaz)
library(ggplot2)
katrina <- fread('Survival Analysis/Data/katrina.csv')
# create a survival curve with no stratification
# survive==0 since we're interested in pump failure (non-survival)
katrina_fit <- survfit(Surv(katrina$hour, katrina$survive==0) ~ 1, data=katrina)
#plot the survival curve with no stratification
ggsurvplot(katrina_fit, data = katrina, xlab= "Time (in hours)",
conf.int = TRUE, palette = "#20948B",
legend.title = "Reason for Pump Failure",
ggtheme = theme_bw()
)
# stratify by reason and plot
katrina_reason <- survfit(Surv(katrina$hour, katrina$survive==0) ~ katrina$reason, data = katrina, subset = katrina$reason !=0)
ggsurvplot(katrina_reason, conf.int = TRUE,
palette=c("#F4CC70", "#DE7A22","#20948B","#A43820"),
xlab = "Time (in hours)",
font.x=16,
font.y=16,
legend.title = "Reason for Pump Failure",
legend.labs = c('flood','motor','surge','jammed'),
font.legend = list(size=16),
ggtheme = theme_bw()
)
# log-rank test
survdiff(Surv(katrina$hour, katrina$survive==0) ~ katrina$reason, rho = 0, data = katrina, subset = katrina$reason != 0)
# pairwise comparison
pairwise_survdiff(Surv(time = hour, event = survive == 0) ~ reason, rho = 0, data = katrina[katrina$reason != 0,])
# here, i am making a new variable hour2, where i'm setting censored observations
# to have hour2 = 49 so that the function doesn't plot them as if they all had
# the event in the last week
katrina$hour2 <- ifelse(katrina$hour == 48 & katrina$survive == 1, 49, katrina$hour)
s
# create a new variable survive2 that is the opposite of survive
### we did this because kphaz.fit() automatically assumes 0 is censored
### and 1 is the event, and it doesn't look like this can be changed.
katrina$survive2 <- ifelse(katrina$survive==0, 1, 0)
# kphaz.fit() has the same arguments as Surv()
katrina_haz <- with(katrina, kphaz.fit(hour2, survive2))
# and we plot it with kphaz.plot()
kphaz.plot(katrina_haz, main = "Hazard Function")
# need these packages
library(data.table)
library(survival)
library(survminer)
library(muhaz)
library(ggplot2)
katrina <- fread('Survival Analysis/Data/katrina.csv')
# create a survival curve with no stratification
# survive==0 since we're interested in pump failure (non-survival)
katrina_fit <- survfit(Surv(katrina$hour, katrina$survive==0) ~ 1, data=katrina)
#plot the survival curve with no stratification
ggsurvplot(katrina_fit, data = katrina, xlab= "Time (in hours)",
conf.int = TRUE, palette = "#20948B",
legend.title = "Reason for Pump Failure",
ggtheme = theme_bw()
)
# stratify by reason and plot
katrina_reason <- survfit(Surv(katrina$hour, katrina$survive==0) ~ katrina$reason, data = katrina, subset = katrina$reason !=0)
ggsurvplot(katrina_reason, conf.int = TRUE,
palette=c("#F4CC70", "#DE7A22","#20948B","#A43820"),
xlab = "Time (in hours)",
font.x=16,
font.y=16,
legend.title = "Reason for Pump Failure",
legend.labs = c('flood','motor','surge','jammed'),
font.legend = list(size=16),
ggtheme = theme_bw()
)
# here, i am making a new variable hour2, where i'm setting censored observations
# to have hour2 = 49 so that the function doesn't plot them as if they all had
# the event in the last week
katrina$hour2 <- ifelse(katrina$hour == 48 & katrina$survive == 1, 49, katrina$hour)
# create a new variable survive2 that is the opposite of survive
### we did this because kphaz.fit() automatically assumes 0 is censored
### and 1 is the event, and it doesn't look like this can be changed.
katrina$survive2 <- ifelse(katrina$survive==0, 1, 0)
# kphaz.fit() has the same arguments as Surv()
katrina_haz <- with(katrina, kphaz.fit(hour2, survive2))
# extract values from katrina_haz and create better visualizaiton.
k_time <- katrina_haz$time
k_haz <- katrina_haz$haz
### cumulative hazard ###
ggsurvplot(katrina_fit, fun = "cumhaz", palette = "grey")
### cumulative hazard ###
ggsurvplot(katrina_fit, fun = "cumhaz", palette = "grey",
xlab = "Time (in hours)",
color="#DE7A22")
### cumulative hazard ###
ggsurvplot(katrina_fit, fun = "cumhaz", palette = "grey",
xlab = "Time (in hours)",
palette="#DE7A22")
ggsurvplot(katrina_fit, fun = "cumhaz", palette = "grey",
xlab = "Time (in hours)",
palette="#DE7A22")
### cumulative hazard ###
ggsurvplot(katrina_fit, fun = "cumhaz", palette = "grey",
xlab = "Time (in hours)",
color="#DE7A22")
### cumulative hazard ###
ggsurvplot(katrina_fit, fun = "cumhaz", palette = "grey",
xlab = "Time (in hours)",
color="#DE7A22",
legend.title = "Reason for Pump Failure",
ggtheme = theme_bw())
# need these packages
library(data.table)
library(survival)
library(survminer)
library(muhaz)
library(ggplot2)
katrina <- fread('Survival Analysis/Data/katrina.csv')
# create a survival curve with no stratification
# survive==0 since we're interested in pump failure (non-survival)
katrina_fit <- survfit(Surv(katrina$hour, katrina$survive==0) ~ 1, data=katrina)
#plot the survival curve with no stratification
ggsurvplot(katrina_fit, data = katrina, xlab= "Time (in hours)",
conf.int = TRUE, palette = "#20948B",
legend.title = "Reason for Pump Failure",
ggtheme = theme_bw()
)
#plot the survival curve with no stratification
ggsurvplot(katrina_fit, data = katrina, xlab= "Time (in hours)",
conf.int = TRUE, palette = "#20948B",
legend.title = "Reason for Pump Failure",
ggtheme = theme_bw(),
font.x=16,
font.y=16
)
#plot the survival curve with no stratification
ggsurvplot(katrina_fit, data = katrina, xlab= "Time (in hours)",
conf.int = TRUE, palette = "#20948B",
legend.title = "Reason for Pump Failure",
ggtheme = theme_bw(),
font.x=16,
font.y=16,
font.legend = list(size=16)
)
# here, i am making a new variable hour2, where i'm setting censored observations
# to have hour2 = 49 so that the function doesn't plot them as if they all had
# the event in the last week
katrina$hour2 <- ifelse(katrina$hour == 48 & katrina$survive == 1, 49, katrina$hour)
# create a new variable survive2 that is the opposite of survive
### we did this because kphaz.fit() automatically assumes 0 is censored
### and 1 is the event, and it doesn't look like this can be changed.
katrina$survive2 <- ifelse(katrina$survive==0, 1, 0)
# kphaz.fit() has the same arguments as Surv()
katrina_haz <- with(katrina, kphaz.fit(hour2, survive2))
# and we plot it with kphaz.plot()
kphaz.plot(katrina_haz, main = "Hazard Function")
# extract values from katrina_haz and create better visualizaiton.
k_time <- katrina_haz$time
k_haz <- katrina_haz$haz
hazard_df <- as.data.frame(cbind(k_time, k_haz))
ggplot(data=hazard_df, y=hazard_df$k_time, x=hazard_df$k_haz)
### cumulative hazard ###
ggsurvplot(katrina_fit, fun = "cumhaz", palette = "grey",
xlab = "Time (in hours)",
color="#DE7A22",
legend.title = "Reason for Pump Failure",
ggtheme = theme_bw())
ggsurvplot(katrina_fit, data = katrina, xlab= "Time (in hours)",
conf.int = TRUE, palette = "#20948B",
legend.title = "Reason for Pump Failure",
ggtheme = theme_bw()
)
### cumulative hazard ###
ggsurvplot(katrina_fit, fun = "cumhaz", palette = "grey",
xlab = "Time (in hours)",
color="#DE7A22",
legend.title = "Reason for Pump Failure",
ggtheme = theme_bw(),
font.x=16,
font.y=16,
font.legend = list(size=16)
)
# need these packages
library(data.table)
library(survival)
library(survminer)
library(muhaz)
library(ggplot2)
katrina <- fread('Survival Analysis/Data/katrina.csv')
# create a survival curve with no stratification
# survive==0 since we're interested in pump failure (non-survival)
katrina_fit <- survfit(Surv(katrina$hour, katrina$survive==0) ~ 1, data=katrina)
#plot the survival curve with no stratification
ggsurvplot(katrina_fit, data = katrina, xlab= "Time (in hours)",
conf.int = TRUE, palette = "#20948B",
legend.title = "Reason for Pump Failure",
ggtheme = theme_bw(),
font.x=16,
font.y=16,
font.legend = list(size=16)
)
# here, i am making a new variable hour2, where i'm setting censored observations
# to have hour2 = 49 so that the function doesn't plot them as if they all had
# the event in the last week
katrina$hour2 <- ifelse(katrina$hour == 48 & katrina$survive == 1, 49, katrina$hour)
# create a new variable survive2 that is the opposite of survive
### we did this because kphaz.fit() automatically assumes 0 is censored
### and 1 is the event, and it doesn't look like this can be changed.
katrina$survive2 <- ifelse(katrina$survive==0, 1, 0)
# kphaz.fit() has the same arguments as Surv()
katrina_haz <- with(katrina, kphaz.fit(hour2, survive2))
# and we plot it with kphaz.plot()
kphaz.plot(katrina_haz, main = "Hazard Function")
# and we plot it with kphaz.plot()
kphaz.plot(katrina_haz, main = "Hazard Function" )
axis(1,cex.axis=2)
axis(1,cex.axis=1)
axis(1,cex.axis=1)
# and we plot it with kphaz.plot()
kphaz.plot(katrina_haz, main = "Hazard Function" )
axis(1,cex.axis=1)
# and we plot it with kphaz.plot()
kphaz.plot(katrina_haz, main = "Hazard Function" )
# and we plot it with kphaz.plot()
kphaz.plot(katrina_haz, main = "Hazard Function" )
cex.axis=0.5
# and we plot it with kphaz.plot()
kphaz.plot(katrina_haz, main = "Hazard Function",cex.axis=0.5) )
# and we plot it with kphaz.plot()
kphaz.plot(katrina_haz, main = "Hazard Function",cex.axis=0.5)
# and we plot it with kphaz.plot()
kphaz.plot(katrina_haz, main = "Hazard Function",cex.axis=1)
# and we plot it with kphaz.plot()
kphaz.plot(katrina_haz, main = "Hazard Function",cex.axis=1.5)
# and we plot it with kphaz.plot()
kphaz.plot(katrina_haz, main = "Hazard Function",cex.axis=1.2)
# and we plot it with kphaz.plot()
kphaz.plot(katrina_haz, main = "Hazard Function",cex.axis=1.2, cex.label=2)
# and we plot it with kphaz.plot()
kphaz.plot(katrina_haz, main = "Hazard Function",cex.axis=1.2,font.axis=2)
# and we plot it with kphaz.plot()
kphaz.plot(katrina_haz, main = "Hazard Function",cex.axis=1.2,font.xlab=2)
# and we plot it with kphaz.plot()
kphaz.plot(katrina_haz, main = "Hazard Function",cex.axis=1.2,xlab=2)
# and we plot it with kphaz.plot()
kphaz.plot(katrina_haz, main = "Hazard Function",cex.axis=1.2, pch=12)
# and we plot it with kphaz.plot()
kphaz.plot(katrina_haz, main = "Hazard Function",cex.axis=1.2, pch=17)
# and we plot it with kphaz.plot()
kphaz.plot(katrina_haz, main = "Hazard Function",cex.axis=1.2, pch=27)
# and we plot it with kphaz.plot()
kphaz.plot(katrina_haz, main = "Hazard Function",cex.axis=1.2)
# extract values from katrina_haz and create better visualizaiton.
k_time <- katrina_haz$time
# and we plot it with kphaz.plot()
kphaz.plot(katrina_haz, main = "Hazard Function",cex.axis=1.2)
mtext("Awesome Y variable", side=2, line=2.2, cex=2)
# and we plot it with kphaz.plot()
kphaz.plot(katrina_haz, main = "Hazard Function",cex.axis=1.2, side=2)
# and we plot it with kphaz.plot()
kphaz.plot(katrina_haz, main = "Hazard Function",cex.axis=1.2, cex=2)
# and we plot it with kphaz.plot()
kphaz.plot(katrina_haz, main = "Hazard Function",cex.axis=1.2, cex=4)
# and we plot it with kphaz.plot()
kphaz.plot(katrina_haz, main = "Hazard Function",cex.axis=1.2, cex=4)
# and we plot it with kphaz.plot()
kphaz.plot(katrina_haz, main = "Hazard Function",cex.axis=1.2,cex.labl=2)
# and we plot it with kphaz.plot()
kphaz.plot(katrina_haz, main = "Hazard Function",cex.axis=1.2,cex.main=12)
# and we plot it with kphaz.plot()
kphaz.plot(katrina_haz, main = "Hazard Function",cex.axis=1.2,cex.main=6)
# and we plot it with kphaz.plot()
kphaz.plot(katrina_haz, main = "Hazard Function",cex.axis=1.2,cex.main=3)
# and we plot it with kphaz.plot()
kphaz.plot(katrina_haz, main = "Hazard Function",cex.axis=1.2,cex.main=2)
# and we plot it with kphaz.plot()
kphaz.plot(katrina_haz, main = "Hazard Function",cex.axis=1.2,cex.main=2)
# and we plot it with kphaz.plot()
kphaz.plot(katrina_haz, main = "Hazard Function",cex.axis=1.2,cex.main=1)
# and we plot it with kphaz.plot()
kphaz.plot(katrina_haz, main = "Hazard Function",cex.axis=1.2,cex.main=1.5)
# and we plot it with kphaz.plot()
kphaz.plot(katrina_haz, main = "Hazard Function",cex.axis=1.2,cex.main=1.5,cex.lab=1.2)
# and we plot it with kphaz.plot()
kphaz.plot(katrina_haz, main = "Hazard Function",cex.axis=1.2,cex.main=1.5,cex.lab=12)
# and we plot it with kphaz.plot()
kphaz.plot(katrina_haz, main = "Hazard Function",cex.axis=1.2,cex.main=1.5,cex.lab=2)
# and we plot it with kphaz.plot()
kphaz.plot(katrina_haz, main = "Hazard Function",cex.axis=1.2,cex.main=1.5,cex.lab=1.5)
#plot the survival curve with no stratification
ggsurvplot(katrina_fit, data = katrina, xlab= "Time (in hours)",
conf.int = TRUE, palette = "#20948B",
legend.title = "Reason for Pump Failure",
ggtheme = theme_bw(),
font.x=16,
font.y=16,
font.legend = list(size=16)
)
ggsurvplot(katrina_reason, conf.int = TRUE,
palette=c("#F4CC70", "#DE7A22","#20948B","#A43820"),
xlab = "Time (in hours)",
font.x=16,
font.y=16,
font.axis=2,
legend.title = "Reason for Pump Failure",
legend.labs = c('flood','motor','surge','jammed'),
font.legend = list(size=16),
ggtheme = theme_bw()
)
# stratify by reason and plot
katrina_reason <- survfit(Surv(katrina$hour, katrina$survive==0) ~ katrina$reason, data = katrina, subset = katrina$reason !=0)
ggsurvplot(katrina_reason, conf.int = TRUE,
palette=c("#F4CC70", "#DE7A22","#20948B","#A43820"),
xlab = "Time (in hours)",
font.x=16,
font.y=16,
font.axis=2,
legend.title = "Reason for Pump Failure",
legend.labs = c('flood','motor','surge','jammed'),
font.legend = list(size=16),
ggtheme = theme_bw()
)
ggsurvplot(katrina_reason, conf.int = TRUE,
palette=c("#F4CC70", "#DE7A22","#20948B","#A43820"),
xlab = "Time (in hours)",
font.x=16,
font.y=16,
font.axis=4,
legend.title = "Reason for Pump Failure",
legend.labs = c('flood','motor','surge','jammed'),
font.legend = list(size=16),
ggtheme = theme_bw()
)
ggsurvplot(katrina_reason, conf.int = TRUE,
palette=c("#F4CC70", "#DE7A22","#20948B","#A43820"),
xlab = "Time (in hours)",
font.x=16,
font.y=16,
font.axis=7,
legend.title = "Reason for Pump Failure",
legend.labs = c('flood','motor','surge','jammed'),
font.legend = list(size=16),
ggtheme = theme_bw()
)
ggsurvplot(katrina_reason, conf.int = TRUE,
palette=c("#F4CC70", "#DE7A22","#20948B","#A43820"),
xlab = "Time (in hours)",
font.x=16,
font.y=16,
labs.size=12,
legend.title = "Reason for Pump Failure",
legend.labs = c('flood','motor','surge','jammed'),
font.legend = list(size=16),
ggtheme = theme_bw()
)
ggsurvplot(katrina_reason, conf.int = TRUE,
palette=c("#F4CC70", "#DE7A22","#20948B","#A43820"),
xlab = "Time (in hours)",
font.x=16,
font.y=16,
font.labs =16
legend.title = "Reason for Pump Failure",
legend.labs = c('flood','motor','surge','jammed'),
font.legend = list(size=16),
ggtheme = theme_bw()
)
ggsurvplot(katrina_reason, conf.int = TRUE,
palette=c("#F4CC70", "#DE7A22","#20948B","#A43820"),
xlab = "Time (in hours)",
font.x=16,
font.y=16,
font.labs =16,
legend.title = "Reason for Pump Failure",
legend.labs = c('flood','motor','surge','jammed'),
font.legend = list(size=16),
ggtheme = theme_bw()
)
ggsurvplot(katrina_reason, conf.int = TRUE,
palette=c("#F4CC70", "#DE7A22","#20948B","#A43820"),
xlab = "Time (in hours)",
font.x=16,
font.y=16,
font.axis=7,
legend.title = "Reason for Pump Failure",
legend.labs = c('flood','motor','surge','jammed'),
font.legend = list(size=16),
ggtheme = theme_bw()
)
ggsurvplot(katrina_reason, conf.int = TRUE,
palette=c("#F4CC70", "#DE7A22","#20948B","#A43820"),
xlab = "Time (in hours)",
font.x=16,
font.y=16,
font.axis=100,
legend.title = "Reason for Pump Failure",
legend.labs = c('flood','motor','surge','jammed'),
font.legend = list(size=16),
ggtheme = theme_bw()
)
ggsurvplot(katrina_reason, conf.int = TRUE,
palette=c("#F4CC70", "#DE7A22","#20948B","#A43820"),
xlab = "Time (in hours)",
font.x=16,
font.y=16,
font.axis=100,
legend.title = "Reason for Pump Failure",
legend.labs = c('flood','motor','surge','jammed'),
font.legend = list(size=16),
ggtheme = theme_bw()
)
